
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Quickstart &#8212; pyautoupdate 1.0.0.post1+04cee43 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0.post1+04cee43',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/pyautoupdate_logo_icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pyautoupdate API" href="pyautoupdate.html" />
    <link rel="prev" title="Welcome to Pyautoupdate’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-dependencies">
<h2>Installing Dependencies<a class="headerlink" href="#installing-dependencies" title="Permalink to this headline">¶</a></h2>
<p>The core dependencies are</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">requests</span></code> for retrieving updated versions</li>
<li><code class="docutils literal"><span class="pre">setuptools</span></code> for archive manipulation and version comparison</li>
</ul>
</div>
<div class="section" id="distributing-your-application">
<h2>Distributing your Application<a class="headerlink" href="#distributing-your-application" title="Permalink to this headline">¶</a></h2>
<p>In the installer for your program, you need to include the following files:</p>
<ul class="simple">
<li>Code file that creates launcher</li>
<li>Auxilliary code files passed into launcher</li>
<li><code class="docutils literal"><span class="pre">version.txt</span></code> that contains a <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0440"><strong>PEP 440</strong></a> compliant version number</li>
<li><code class="docutils literal"><span class="pre">filelist.txt</span></code> with a list of paths to the code and resource files</li>
</ul>
<p>See <a class="reference internal" href="project.html"><span class="doc">Project Structure</span></a> for a directory tree.</p>
<p>Package these files into your application installer.</p>
</div>
<div class="section" id="pushing-updates-to-a-server">
<h2>Pushing Updates to a Server<a class="headerlink" href="#pushing-updates-to-a-server" title="Permalink to this headline">¶</a></h2>
<p>To create new versions, copy the code files into a directory
and compress the directory into a
<code class="docutils literal"><span class="pre">.zip</span></code>, <code class="docutils literal"><span class="pre">.tar.gz</span></code>, or a <code class="docutils literal"><span class="pre">.tar.bz2</span></code> archive.</p>
<p>Upload the archive to the update server and place a file named <code class="docutils literal"><span class="pre">version.txt</span></code>
containing a <span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0440"><strong>PEP 440</strong></a> version number in the same directory as the archive.
The server directory should now look like this:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>server-directory-pointed-to-by-url
├── project.zip
└── version.txt
</pre></div>
</div>
<p>Pyautoupdate will then download the new version when performing updates
and replace the old code files with the new ones. It will modify the URL of the
update server to include the compressed archive name and the <code class="docutils literal"><span class="pre">version.txt</span></code>
version number, as shown below:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>https://a_sample_website.com/ -&gt; https://a_sample_website.com/project.zip
                              -&gt; https://a_sample_website.com/version.txt
</pre></div>
</div>
<p>This is a sample application initialization file, including an update check
before code execution.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pyautoupdate.launcher</span> <span class="kn">import</span> <span class="n">Launcher</span>

<span class="c1"># Run code and return with exit code of launched code</span>
<span class="n">launch</span><span class="o">=</span><span class="n">Launcher</span><span class="p">(</span><span class="s2">&quot;code_1.py&quot;</span><span class="p">,</span><span class="s2">&quot;https://update-url&quot;</span><span class="p">)</span>

<span class="c1"># Check for update before running</span>
<span class="n">need_update</span> <span class="o">=</span> <span class="n">launch</span><span class="o">.</span><span class="n">check_new</span><span class="p">()</span>
<span class="k">if</span> <span class="n">need_update</span><span class="p">:</span>
    <span class="c1"># Prompt user for upgrade</span>
    <span class="n">response</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">while</span> <span class="n">response</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s2">&quot;yn&quot;</span><span class="p">:</span>
        <span class="n">response</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;An update is available.&quot;</span>
                       <span class="s2">&quot;Would you like to update? (y/n)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
        <span class="c1"># Update code</span>
        <span class="n">launch</span><span class="o">.</span><span class="n">update_code</span><span class="p">()</span>
<span class="c1"># Run developer code here</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">launch</span><span class="o">.</span><span class="n">run</span><span class="p">())</span>
</pre></div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">https://update-url</span></code> with the actual url of the folder on the server.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can create OS dependent URLs by calling OS detection routines in the
initialization file and creating different update URLs for different
operating systems. This is useful for packaging OS dependent files.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/images/pyautoupdate_logo_square.png" alt="Logo"/>
    
    <h1 class="logo logo-name">pyautoupdate</h1>
    
  </a>
</p>



<p class="blurb">An auto-update API for Python programs</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=rlee287&repo=pyautoupdate&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a href="https://travis-ci.org/rlee287/pyautoupdate">
    <img
        alt="https://secure.travis-ci.org/rlee287/pyautoupdate.svg?branch=master"
        src="https://secure.travis-ci.org/rlee287/pyautoupdate.svg?branch=master"
    />
</a>
</p>




    

<p>
<a href="https://codecov.io/github/rlee287/pyautoupdate">
    <img
    alt="https://codecov.io/github/rlee287/pyautoupdate/coverage.svg?branch=master"
    src="https://codecov.io/github/rlee287/pyautoupdate/coverage.svg?branch=master"
    />
</a>
</p>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-dependencies">Installing Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#distributing-your-application">Distributing your Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pushing-updates-to-a-server">Pushing Updates to a Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyautoupdate.html">Pyautoupdate API</a></li>
<li class="toctree-l1"><a class="reference internal" href="project.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal.html">Internal Update Procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>


  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickstart.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017 by Ryan Lee.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/quickstart.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/rlee287/pyautoupdate" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>